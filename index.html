<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุตุฉ ุงูุงูุชุตุงุฏ | Omar Abdel Tawab</title>
    <meta name="description" content="ุงูููุตุฉ ุงูุชุนููููุฉ ุงูุฑุณููุฉ ูุงุฎุชุจุงุฑุงุช ูุดุฑูุญุงุช ูุงุฏุฉ ุงูุงูุชุตุงุฏุ ุชุชูุญ ููุทูุงุจ ุงูุชููุฒ ุงูุฃูุงุฏููู ุชุญุช ุฅุดุฑุงู  ุนูุฑ ุนุจุฏ ุงูุชูุงุจ.">
    
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --primary: #1e3a8a; 
            --accent: #f97316;  
            --whatsapp: #25d366; 
            --facebook: #1877f2;
            --bg: #f0f4f8;
            --white: #ffffff;
            --grad: linear-gradient(45deg, #1e3a8a, #f97316);
        }

        body { font-family: 'Tajawal', sans-serif; background-color: var(--bg); margin: 0; display: flex; flex-direction: column; min-height: 100vh; }

        /* ุดุงุดุฉ ุงูุฏุฎูู */
        .auth-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, #3b82f6, #1e3a8a); display: flex; justify-content: center; align-items: center; z-index: 2000; }
        .auth-card { background: var(--white); padding: 40px; border-radius: 30px; width: 90%; max-width: 440px; text-align: center; box-shadow: 0 30px 60px rgba(0,0,0,0.4); position: relative; overflow: hidden; }
        .auth-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 8px; background: var(--grad); }

        .dev-credit-ar { font-size: 14px; color: #64748b; font-weight: bold; margin-bottom: 5px; display: block; }
        .dev-name-en { font-size: 22px; font-weight: 800; margin-bottom: 15px; display: block; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        input { width: 100%; padding: 16px; margin: 12px 0; border: 2px solid #e2e8f0; border-radius: 15px; outline: none; box-sizing: border-box; font-family: 'Tajawal'; font-size: 15px; transition: 0.3s; }
        input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(30, 58, 138, 0.1); }

        /* ุงูุญุงููุงุช ูุงูุจุทุงูุงุช */
        .container { flex: 1; max-width: 800px; margin: 20px auto; padding: 20px; width: 100%; box-sizing: border-box; }
        
        .quiz-card, .dev-card, .lesson-card { 
            background: var(--white); 
            padding: 30px; border-radius: 25px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-bottom: 20px;
            position: relative; overflow: hidden;
        }

        /* ุชูุณูู ุจุทุงูุงุช ุงูุดุฑุญ ูุงูุฃุณุฆูุฉ */
        .quiz-card::before, .dev-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 6px; background: var(--grad); }

        .lesson-card {
            border-right: 8px solid var(--primary);
            background: linear-gradient(to left, #ffffff, #f8faff);
            transition: 0.3s;
            padding: 20px;
        }
        .lesson-card:hover { transform: scale(1.01); box-shadow: 0 15px 35px rgba(30, 58, 138, 0.1); }
        .lesson-title { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; font-weight: 800; color: var(--primary); font-size: 18px; }
        .lesson-title i { color: var(--accent); font-size: 22px; }
        .lesson-content { line-height: 1.8; color: #334155; font-size: 16px; text-align: right; }

        /* ุนูุงุตุฑ ุงูุงุฎุชุจุงุฑ */
        .quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #eee; }
        .timer-box { background: #fef2f2; color: #e11d48; padding: 8px 15px; border-radius: 12px; font-weight: 800; border: 1px solid #fecaca; }
        
        .progress-container { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .q-counter { font-weight: bold; color: var(--primary); font-size: 14px; }
        .progress-bar { height: 10px; background: #e2e8f0; border-radius: 20px; flex: 1; margin-left: 15px; overflow: hidden; }
        #progress-fill { height: 100%; background: var(--grad); width: 0%; transition: 0.4s; }
        
        .q-text { font-size: 20px; font-weight: 800; color: var(--primary); margin-bottom: 25px; text-align: right; }
        .option-btn { display: block; padding: 15px 20px; margin: 10px 0; border: 2px solid #f1f5f9; border-radius: 15px; cursor: pointer; transition: 0.2s; background: #fcfcfc; font-size: 17px; text-align: right; }
        .option-btn.selected { border-color: var(--accent); background: #fff7ed; font-weight: bold; }

        /* ุงูุฃุฒุฑุงุฑ ุงูุนุงูุฉ */
        .btn-nav { width: 100%; padding: 15px; border-radius: 15px; border: none; background: var(--grad); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; font-family: 'Tajawal'; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 16px; margin-top: 10px; }
        .btn-nav:hover { filter: brightness(1.1); transform: translateY(-2px); }
        .nav-buttons { display: flex; gap: 15px; margin-top: 25px; }
        .btn-nav.secondary { background: #64748b; } /* ุฒุฑ ุฑูุงุฏู */

        /* ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .menu-item { background: var(--white); padding: 30px; border-radius: 20px; text-align: center; cursor: pointer; transition: 0.3s; border: 2px solid transparent; box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
        .menu-item:hover { border-color: var(--accent); transform: translateY(-5px); }
        .menu-item i { font-size: 40px; margin-bottom: 15px; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        /* ุฒุฑ ุงูุนูุฏุฉ ุงููุฎุตุต (ุฃุฒุฑู ูุน ุดุฑูุท ุจุฑุชูุงูู) */
        .back-btn-custom {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 15px;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 20px auto;
            width: 100%;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(30, 58, 138, 0.2);
        }
        /* ุงูุดุฑูุท ุงููุชุฏุฑุฌ ููู ุงูุฒุฑ */
        .back-btn-custom::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--grad);
        }
        .back-btn-custom:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(30, 58, 138, 0.3); }

        /* ุตูุฏูู ุงููุชุงุฆุฌ ุงููุงุจู ููุชูุฑูุฑ */
        #final-analysis {
            max-height: 350px; /* ุงุฑุชูุงุน ุซุงุจุช */
            overflow-y: auto;  /* ุชูุนูู ุงูุณูุฑูู */
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 15px;
            margin-top: 20px;
            text-align: right;
        }
        /* ุชูุณูู ุงูุณูุฑูู ุจุงุฑ */
        #final-analysis::-webkit-scrollbar { width: 8px; }
        #final-analysis::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 4px; }
        #final-analysis::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        #final-analysis::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ูุงูุชุฐููู */
        .social-row { display: flex; justify-content: center; gap: 30px; }
        .circle-link { width: 55px; height: 55px; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 26px; text-decoration: none; transition: 0.3s; }
        .wa-bg { background-color: var(--whatsapp); }
        .fb-bg { background-color: var(--facebook); }

        footer { padding: 20px; text-align: center; font-size: 11px; color: #94a3b8; }

        /* ุงูุดูุงุฏุฉ */
        @media print {
            body * { visibility: hidden; }
            #certificate-print, #certificate-print * { visibility: visible; }
            #certificate-print { position: absolute; left: 0; top: 0; width: 100%; display: block !important; border: 15px double #1e3a8a !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
        #certificate-print { display: none; width: 800px; margin: 0 auto; padding: 50px; background: #fff; text-align: center; border-radius: 10px; box-sizing: border-box; }

        /* ุฒุฑ ุงูููุงุญุธุงุช ุงูุนุงุฆู */
        #feedback-button { position: fixed; : 20px; left: 20px; width: 60px; height: 60px; background: var(--grad); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 1500; font-size: 24px; transition: transform 0.3s; }
        #feedback-button:hover { transform: scale(1.1); }

        #feedback-panel { position: fixed; bottom: 90px; left: 20px; width: 300px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); display: none; z-index: 1500; text-align: right; }
        #feedback-panel textarea { width: 100%; height: 80px; margin: 10px 0; padding: 10px; border-radius: 10px; border: 1px solid #ddd; font-family: 'Tajawal'; box-sizing: border-box; }

    </style>
</head>
<body>

<div id="auth-screen" class="auth-overlay">
    <div class="auth-card">
        <span class="dev-credit-ar">ุชู ุชุทููุฑ ุงูููุตุฉ ุจูุงุณุทุฉ  :</span>
        <span class="dev-name-en">Omar Abdel Tawab Saleh</span>
        <h2 style="color: var(--primary); margin-bottom: 10px;">๐ ููุตุฉ ุงูุงูุชุตุงุฏ ุงูุฑูููุฉ</h2>
        
        <div style="margin: 15px 0; padding: 10px; background: #f8fafc; border-radius: 15px; border: 1px dashed #cbd5e1;">
            <div style="font-size: 12px; color: #64748b;">ุฅุฌูุงูู ุฒูุงุฑุงุช ุงูููุตุฉ</div>
            <div id="global-count" style="font-size: 22px; font-weight: 800; color: var(--primary);">ุฌุงุฑู ุงูุชุญููู...</div>
        </div>

        <input type="text" id="name-input" placeholder="๐ ุงูุงุณู ุงูุซูุงุซู">
        <input type="text" id="grade-input" placeholder="๐๏ธ ุงููุฑูุฉ ุงูุฏุฑุงุณูุฉ">
        <button class="btn-nav" style="font-size:18px;" onclick="handleLogin()">ุฏุฎูู ุงูููุตุฉ <i class="fas fa-sign-in-alt"></i></button>
        <p id="auth-err" style="color: #e11d48; display: none; margin-top: 10px;">โ๏ธ ูุฑุฌู ุฅููุงู ุฌููุน ุงูุจูุงูุงุช</p>
    </div>
</div>

<div class="container">
    <div id="main-menu" style="display: none;">
        <div class="quiz-card" style="text-align: center;">
            <h2 style="color: var(--primary);">ูุฑุญุจุงู ุจู ูู ูุณู ุงูุงูุชุตุงุฏ ๐๏ธ</h2>
            <p style="color: #64748b;">ุงุฎุชุฑ ุงููุณุงุฑ ุงูุฐู ุชุฑุบุจ ูู ุงูุจุฏุก ุจู</p>
            <div class="menu-grid">
                <div class="menu-item" onclick="showSection('explanation')">
                    <i class="fas fa-book-open"></i>
                    <h3>ูุณู ุงูุดุฑุญ</h3>
                    <p style="font-size: 12px;">ููุฎุตุงุช ุงููุงุฏุฉ</p>
                </div>
                <div class="menu-item" onclick="showSection('quiz')">
                    <i class="fas fa-vial"></i>
                    <h3>ุงูุงุฎุชุจุงุฑุงุช</h3>
                    <p style="font-size: 12px;">ูุณุชูู ูุชูุฏู</p>
                </div>
            </div>
        </div>
    </div>

    <<div id="explanation-section" style="display: none;">
    
    <div class="lesson-card" style="border-right-width: 10px;">
        <div class="lesson-title" style="font-size: 22px;">
            <i class="fas fa-globe-americas"></i>
            <span>ุงููุญุฏุฉ ุงูุฃููู: ูุงููุฉ ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ ูุนูุงูููุง</span>
        </div>
        <div class="lesson-content">
            <div style="background: #f8fafc; padding: 15px; border-radius: 12px; margin-bottom: 15px; border-right: 4px solid var(--primary);">
                <p><b>๐น ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ:</b> ุงููุจุงุฏูุงุช ูู ูุฌูุฉ ูุธุฑ <b>ูุทููุฉ</b> (ุฏููุฉ ูุงุญุฏุฉ ูุน ุงูุนุงูู)ุ ูุชุชุถูู ุงูุชูุงู ุงูุณูุน ูุงูุฎุฏูุงุช ุนุจุฑ ุงูุญุฏูุฏ.</p>
                <p><b>๐น ุงูุชุฌุงุฑุฉ ุงูุฏูููุฉ:</b> ุงููุจุงุฏูุงุช ูู ูุฌูุฉ ูุธุฑ <b>ุนุงูููุฉ</b> (ูุฌููุน ุงููุจุงุฏูุงุช ุจูู ูู ุฏูู ุงููุฌุชูุน ุงูุฏููู).</p>
            </div>
            
            <h3 style="color: var(--primary); font-size: 18px;"><i class="fas fa-chart-line"></i> ุงูุนูุงูู ุงููุคุซุฑุฉ ุนูู ุญุฌู ุงูุชุฌุงุฑุฉ:</h3>
            <ul style="list-style: none; padding-right: 0;">
                <li style="margin-bottom: 10px; background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <i class="fas fa-wallet" style="color: var(--accent);"></i> <b>ุงูุฏุฎู ุงููููู:</b> ุงููุญุฑู ุงูุฃุณุงุณูุ ุฒูุงุฏุชู ุชุนูู ุฒูุงุฏุฉ ุงูุงุณุชูุฑุงุฏ.
                </li>
                <li style="margin-bottom: 10px; background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <i class="fas fa-tags" style="color: var(--accent);"></i> <b>ุงูุฃุณุนุงุฑ ุงููุณุจูุฉ:</b> ุงูุฎูุงุถ ุงูุฃุณุนุงุฑ ุงููุญููุฉ ูุดุฌุน ุงูุชุตุฏูุฑ.
                </li>
                <li style="margin-bottom: 10px; background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
                    <i class="fas fa-truck-moving" style="color: var(--accent);"></i> <b>ุชูุงููู ุงูููู:</b> ูููุง ุงูุฎูุถุช ุงูุชูุงูููุ ุฒุงุฏ ุญุฌู ุงูุชุจุงุฏู.
                </li>
            </ul>
        </div>
    </div>

    <div class="lesson-card" style="border-right-width: 10px; border-right-color: #dc2626;">
        <div class="lesson-title" style="font-size: 22px; color: #dc2626;">
            <i class="fas fa-balance-scale"></i>
            <span>ุงููุญุฏุฉ ุงูุซุงููุฉ: ุญุฑูุฉ ุงูุชุฌุงุฑุฉ (ูุคูุฏ ููุนุงุฑุถ)</span>
        </div>
        <div class="lesson-content">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <div style="background: #f0fff4; padding: 15px; border-radius: 12px; border: 1px solid #bbf7d0;">
                    <h4 style="color: #16a34a; margin-top: 0;">โ ุงููุคูุฏูู ููุญุฑูุฉ</h4>
                    <p style="font-size: 14px;">ููู ุงูุชูููููุฌูุงุ ุงูููุงูุณุฉุ ูุชูููุฑ ุณูุน ูุง ูููู ุฅูุชุงุฌูุง ูุญููุงู.</p>
                </div>
                <div style="background: #fef2f2; padding: 15px; border-radius: 12px; border: 1px solid #fecaca;">
                    <h4 style="color: #dc2626; margin-top: 0;">โ ุงููุนุงุฑุถูู (ุงูุญูุงุฆูุฉ)</h4>
                    <p style="font-size: 14px;">ุญูุงูุฉ ุงูุตูุงุนุฉ ุงููููุฏุฉุ ุงูุฃูู ุงูููููุ ููุญุงุฑุจุฉ ุงูุจุทุงูุฉ.</p>
                </div>
            </div>
            <div style="background: #fff; padding: 15px; border-radius: 12px; border: 1px dashed #cbd5e1;">
                <p><b>๐ก๏ธ ุงูุตูุงุนุฉ ุงููููุฏุฉ:</b> ููุญ ุงููุตุงูุน ุงููุงุดุฆุฉ "ูุชุฑุฉ ุณูุงุญ" ููููู ุจุนูุฏุงู ุนู ููุงูุณุฉ ุงูุดุฑูุงุช ุงูุนุงูููุฉ.</p>
            </div>
        </div>
    </div>

    <div class="lesson-card" style="border-right-width: 10px; border-right-color: #f59e0b;">
        <div class="lesson-title" style="font-size: 22px; color: #f59e0b;">
            <i class="fas fa-file-invoice-dollar"></i>
            <span>ุงููุญุฏุฉ ุงูุซุงูุซุฉ: ุงูุณูุงุณุงุช ุงูุฌูุฑููุฉ ูุงูุงุณุชุฑุงุชูุฌูุงุช</span>
        </div>
        <div class="lesson-content">
            <h3 style="color: #b45309; font-size: 18px;">๐ ุงุณุชุฑุงุชูุฌูุงุช ุงูุชูููุฉ:</h3>
            <p><b>๐ ุฅุญูุงู ุงููุงุฑุฏุงุช:</b> ุชุตููุน ูุง ูุณุชูุฑุฏู ูุญููุงู ูุชุญููู ุงูุงุณุชููุงู.</p>
            <p><b>๐ ุงูุชุตููุน ููุชุตุฏูุฑ:</b> ุงูุชูุฌู ููุฃุณูุงู ุงูุนุงูููุฉ (ุชุฌุฑุจุฉ ุงููููุฑ ุงูุขุณูููุฉ).</p>
            
            <hr style="border: 0.5px solid #eee; margin: 15px 0;">
            
            <h3 style="color: #b45309; font-size: 18px;">๐ ุฃููุงุน ุงูุชุนุฑููุฉ ุงูุฌูุฑููุฉ:</h3>
            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <span style="background: #fef3c7; padding: 5px 15px; border-radius: 20px; font-weight: bold;">ููููุฉ (ูุณุจุฉ)</span>
                <span style="background: #fef3c7; padding: 5px 15px; border-radius: 20px; font-weight: bold;">ููุนูุฉ (ูุจูุบ ุซุงุจุช)</span>
                <span style="background: #fef3c7; padding: 5px 15px; border-radius: 20px; font-weight: bold;">ูุฑูุจุฉ (ุงูุงุซููู ูุนุงู)</span>
            </div>
            <p style="margin-top: 15px;"><b>๐ ุงูุชุฑุงูุฒูุช:</b> ูุฑูุฑ ุงูุจุถุงุฆุน ุนุจุฑ ุงูุฏููุฉ ูุฏููุฉ ุฃุฎุฑู ุฏูู ุฌูุงุฑู ูุฅูุนุงุด ุงูููุงูุฆ.</p>
        </div>
    </div>

    <button class="btn-nav" onclick="showSection('menu')">
        <i class="fas fa-arrow-right"></i> ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
    </button>
</div>


    <div id="quiz-ui" style="display: none;">
        <div class="quiz-card">
            <div class="quiz-header">
                <div id="user-display-name" style="font-weight: 800; color: var(--primary);">ุฌุงุฑู ุงูุชุญููู...</div>
                <div class="timer-box" id="timer">ุงููุชุจูู: 30:00</div>
            </div>
            
            <div class="progress-container">
                <div class="q-counter" id="q-counter">ุณุคุงู 1 ูู 40</div>
                <div class="progress-bar"><div id="progress-fill"></div></div>
            </div>

            <div id="questions-container"></div>

            <div id="confirm-screen" style="display: none;">
                <h3 style="color: var(--primary); text-align: center;">ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</h3>
                <div id="confirm-list" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px; border: 1px solid #eee; border-radius: 15px; padding: 10px;"></div>
                <button class="btn-nav" onclick="submitFinal()">ุชุฃููุฏ ูุฅุฑุณุงู ุงููุชูุฌุฉ โ</button>
                <button class="btn-nav secondary" onclick="showQuestion()">ุชุนุฏูู ุงูุฅุฌุงุจุงุช โ๏ธ</button>
            </div>

            <div id="result-screen" style="display: none; text-align: center;">
                <h2 style="color: var(--primary)">ุงููุชูุฌุฉ ุงูููุงุฆูุฉ</h2>
                <div id="score-display" style="font-size: 55px; font-weight: 900; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent;"></div>
                
                <div id="final-analysis"></div>

                <div style="display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
                    <button class="btn-nav" style="flex:1;" onclick="restartQuiz()">ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ ๐</button>
                    <button class="btn-nav" style="flex:1; background: #0ea5e9;" onclick="printCertificate()">ุทุจุงุนุฉ ุงูุดูุงุฏุฉ ๐</button>
                </div>
                
                <button onclick="showSection('menu')" class="back-btn-custom">
                    <i class="fas fa-home"></i> ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
                </button>
            </div>

            <div class="nav-buttons" id="nav-controls">
                <button class="btn-nav secondary" id="prev-btn" onclick="prevQuestion()">ุงูุณุงุจู</button>
                <button class="btn-nav" id="next-btn" onclick="nextQuestion()">ุงูุชุงูู</button>
            </div>
        </div>
    </div>
    
    <div id="dev-card-global" class="dev-card">
        <div style="font-weight: 800; color: var(--primary); margin-bottom: 10px; font-size: 19px; text-align: center;">Omar Abdel Tawab Saleh</div>
        <div class="social-row">
            <a href="https://wa.me/201202763155" target="_blank" class="circle-link wa-bg"><i class="fab fa-whatsapp"></i></a>
            <a href="https://www.facebook.com/share/1CGUeNkP75/" target="_blank" class="circle-link fb-bg"><i class="fab fa-facebook-f"></i></a>
        </div>
    </div>
</div>

<div id="certificate-print">
    <div style="border: 5px solid #1e3a8a; padding: 40px; position: relative;">
        <h1 style="color: #1e3a8a; font-size: 50px; margin-bottom: 10px;">ุดูุงุฏุฉ ุชูุฏูุฑ</h1>
        <p style="font-size: 22px; color: #666;">ุชุชูุฏู ููุตุฉ ุงูุชุนููู ุงูุฑููู ุจุงูุดูุฑ ูุงูุชูุฏูุฑ ููุทุงูุจ:</p>
        <h2 id="cert-name" style="font-size: 40px; color: #f97316; margin: 20px 0; border-bottom: 2px solid #ddd; display: inline-block; padding: 0 40px;"></h2>
        <p style="font-size: 22px; color: #666;">ูุฐูู ูุชููุฒู ูู ุงุฎุชุจุงุฑ ุงูุงูุชุตุงุฏ ูุญุตููู ุนูู ุฏุฑุฌุฉ:</p>
        <h2 id="cert-score" style="font-size: 60px; color: #1e3a8a; margin: 10px 0;"></h2>
        <div style="margin-top: 60px; display: flex; justify-content: space-between; align-items: flex-end;">
            <div style="text-align: right;">
                <p style="margin: 0;">ุงูุชุงุฑูุฎ: <span id="cert-date"></span></p>
                <p style="margin: 0;">ุงูุฑูู ุงููุฑุฌุนู: <span id="cert-ref"></span></p>
            </div>
            <div style="text-align: center;">
                <p style="margin: 0; font-weight: bold;">ุชูููุน ุงููุดุฑู ุงูุนุงู</p>
                <p style="margin: 5px 0 0 0; font-size: 20px; font-family: 'Tajawal'; color: #1e3a8a;">ุนูุฑ ุนุจุฏ ุงูุชูุงุจ</p>
            </div>
        </div>
    </div>
</div>

<div id="feedback-button" onclick="toggleFeedbackPanel()">
    <i class="fas fa-comment-dots"></i>
</div>

<div id="feedback-panel">
    <h3 style="color: var(--primary); margin-top:0;">ุฑุฃูู ููููุง โจ</h3>
    <input type="tel" id="user-phone" placeholder="ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)">
    <textarea id="user-suggestion" placeholder="ุงูุชุจ ุงูุชุฑุงุญู ููุง..."></textarea>
    <button class="btn-nav" onclick="sendSuggestion()">ุฅุฑุณุงู ุงูุงูุชุฑุงุญ</button>
</div>

<footer>ยฉ 2025 Omar Abdel Tawab Saleh - ุฌููุน ุงูุญููู ูุญููุธุฉ</footer>

<script>
    // ุฅุนุฏุงุฏุงุช ุงูุชูููุฌุฑุงู
    const BOT_TOKEN = '8237095382:AAEwtkETTGq3VEp1flZrIKVXQTWF5KGkCiM'; 
    const CHAT_ID = '6068331455';     

    // ุจูู ุงูุฃุณุฆูุฉ (ููููู ุฅุถุงูุฉ ุงููุฒูุฏ ููุง)
    const questions = [
        { q: "ูุง ูู ุงูุชุนุฑูู ุงูุฃุณุงุณู ูุนูู ุงูุงูุชุตุงุฏุ", a: "ุนูู ุฏุฑุงุณุฉ ุงููุฏุฑุฉ ูุงุฎุชูุงุฑ ุงูุจุฏุงุฆู", o: ["ุนูู ุฏุฑุงุณุฉ ุงููุฏุฑุฉ ูุงุฎุชูุงุฑ ุงูุจุฏุงุฆู", "ุนูู ุฌูุน ุงููุงู ููุท", "ุนูู ุฏุฑุงุณุฉ ุงูุทูุณ", "ุนูู ุงูููุณูุฉ"] },
        { q: "ูุง ูู ุงููุฑู ุงูุฌููุฑู ุจูู ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ ูุงูุฏูููุฉุ", a: "ุงูุฎุงุฑุฌูุฉ ูู ูุฌูุฉ ูุธุฑ ูุทููุฉ ูุงูุฏูููุฉ ูู ูุฌูุฉ ูุธุฑ ุนุงูููุฉ", o: ["ูุง ููุฌุฏ ูุฑู ุจููููุง", "ุงูุฎุงุฑุฌูุฉ ูู ูุฌูุฉ ูุธุฑ ูุทููุฉ ูุงูุฏูููุฉ ูู ูุฌูุฉ ูุธุฑ ุนุงูููุฉ", "ุงูุฎุงุฑุฌูุฉ ุชุฎุต ุงูุณูุน ูุงูุฏูููุฉ ุชุฎุต ุงูุฎุฏูุงุช", "ุงูุฎุงุฑุฌูุฉ ุชุชู ุจุฏูู ุญุฏูุฏ ุณูุงุณูุฉ"] },
        { q: "ุญุณุจ ุญุฌุฉ 'ุงูุตูุงุนุฉ ุงููููุฏุฉ'ุ ููุงุฐุง ุชูุฑุถ ุงูุฏููุฉ ูููุฏุงู ุชุฌุงุฑูุฉุ", a: "ูููุญ ุงูุตูุงุนุงุช ุงููุงุดุฆุฉ ูุชุฑุฉ ุณูุงุญ ููููู ูุงูููุงูุณุฉ", o: ["ูุฒูุงุฏุฉ ุฃุณุนุงุฑ ุงูุณูุน ุงููุญููุฉ", "ูููุญ ุงูุตูุงุนุงุช ุงููุงุดุฆุฉ ูุชุฑุฉ ุณูุงุญ ููููู ูุงูููุงูุณุฉ", "ูููุน ุงูุงุณุชูุฑุงุฏ ููุงุฆูุงู", "ูุชุญููู ูุงุฆุถ ูู ููุฒุงู ุงููุฏููุนุงุช"] },
        { q: "ูุงุฐุง ููุตุฏ ุจุงูุชุนุฑููุฉ ุงูุฌูุฑููุฉ 'ุงูููุนูุฉ'ุ", a: "ูุจูุบ ุซุงุจุช ููุฑุถ ุนูู ูู ูุญุฏุฉ ุจูุทุน ุงููุธุฑ ุนู ูููุชูุง", o: ["ูุณุจุฉ ูุฆููุฉ ูู ูููุฉ ุงูุณูุนุฉ", "ุถุฑูุจุฉ ุชูุฑุถ ุนูู ุงูุฎุฏูุงุช ููุท", "ูุจูุบ ุซุงุจุช ููุฑุถ ุนูู ูู ูุญุฏุฉ ุจูุทุน ุงููุธุฑ ุนู ูููุชูุง", "ุถุฑูุจุฉ ุชูุฑุถ ุนูู ุงูุตุงุฏุฑุงุช ููุท"] },
        { q: "ูู ูุธุฑูุฉ 'ุฏูุฑุฉ ุงูููุชุฌ'ุ ูุชู ุชุตุจุญ ุงูุฏููุฉ ุงููุจุชูุฑุฉ ูุณุชูุฑุฏุฉ ููุณูุนุฉุ", a: "ูู ูุฑุญูุฉ ุงูุชูููุท ูุงูููุทูุฉ", o: ["ูู ูุฑุญูุฉ ุงูุงุจุชูุงุฑ", "ูู ูุฑุญูุฉ ุงููุถุฌ", "ูู ูุฑุญูุฉ ุงูุชูููุท ูุงูููุทูุฉ", "ุจูุฌุฑุฏ ุงุฎุชุฑุงุน ุงูุณูุนุฉ"] },
        { q: "ุฃู ูู ุงูุขุชู ูุนุชุจุฑ ูู ุงูุฃุณุงููุฏ ุบูุฑ ุงูุงูุชุตุงุฏูุฉ ูุญูุงูุฉ ุงูุชุฌุงุฑุฉุ", a: "ุญูุธ ุงูุซูุงูุฉ ูุงููููุฉ ุงููุทููุฉ", o: ["ูุญุงุฑุจุฉ ุงูุจุทุงูุฉ", "ุญูุธ ุงูุซูุงูุฉ ูุงููููุฉ ุงููุทููุฉ", "ุนูุงุฌ ุงูุนุฌุฒ ุงููุงูู", "ุชุญููู ููุงุกุฉ ุฅูุชุงุฌูุฉ"] },
        { q: "ูุง ูู ุงูุงูุชูุงุฏ ุงูููุฌู ูุญุฌุฉ 'ุงูุตูุงุนุฉ ุงููููุฏุฉ'ุ", a: "ูุฏ ุชุถุนู ููุงุกุฉ ุงูุตูุงุนุฉ ูุชุนุชูุฏ ุนูู ุงูุญูุงูุฉ ูุนูุงุฒ ุฏุงุฆู", o: ["ุชุคุฏู ูุฒูุงุฏุฉ ุงูุตุงุฏุฑุงุช ููุฑุงู", "ูุฏ ุชุถุนู ููุงุกุฉ ุงูุตูุงุนุฉ ูุชุนุชูุฏ ุนูู ุงูุญูุงูุฉ ูุนูุงุฒ ุฏุงุฆู", "ุชุคุฏู ูุฎูุถ ุงูุฃุณุนุงุฑ ุงููุญููุฉ", "ุชููุน ุงูุฏููุฉ ูู ูุฑุถ ุงูุถุฑุงุฆุจ"] },
        { q: "ูุง ุงูููุตูุฏ ุจูุธุงู 'ุงูุชุฑุงูุฒูุช ุงููุจุงุดุฑ'ุ", a: "ูุฑูุฑ ุงูุจุถุงุนุฉ ููุฑุงู ุชุญุช ุฑูุงุจุฉ ุฌูุฑููุฉ ุฏูู ุฑุณูู ุนุงุฏูุฉ", o: ["ุชุฎุฒูู ุงูุจุถุงุนุฉ ููุชุฑุฉ ุทูููุฉ", "ูุฑูุฑ ุงูุจุถุงุนุฉ ููุฑุงู ุชุญุช ุฑูุงุจุฉ ุฌูุฑููุฉ ุฏูู ุฑุณูู ุนุงุฏูุฉ", "ุจูุน ุงูุจุถุงุนุฉ ูู ุงูุณูู ุงููุญูู", "ุชุตููุน ุงูุจุถุงุนุฉ ูุจู ุชุตุฏูุฑูุง"] },
        { q: "ูุง ูู ุงูุฎุงุตูุฉ ุงูุฃุณุงุณูุฉ ููุชุนุฑููุฉ ุงูุฌูุฑููุฉ 'ุงูููููุฉ'ุ", a: "ุชูุฑุถ ููุณุจุฉ ูุฆููุฉ ูู ูููุฉ ุงูุณูุนุฉ", o: ["ุชูุฑุถ ููุจูุบ ุซุงุจุช ุนูู ุงููุฒู", "ุชูุฑุถ ููุณุจุฉ ูุฆููุฉ ูู ูููุฉ ุงูุณูุนุฉ", "ุชูุฑุถ ุนูู ุงูุณูุน ุงููุญููุฉ ููุท", "ุชูุฑุถ ุจูุฑุงุฑ ูู ุงููุตุฏุฑ"] },
        { q: "ููุงุฐุง ุชุนุชุจุฑ ุงููููุฏ 'ุฃุตูุงู ุนูููุงู' ูู ุญุงูุฉ ุงูุณูููุฉ ุงููุงููุฉุ", a: "ูุฃููุง ูุง ุชุฏุฑ ุนุงุฆุฏุงู ุฃู ูุงุฆุฏุฉ ูุตุงุญุจูุง ููู ุณุงุฆูุฉ", o: ["ูุฃููุง ุตุนุจุฉ ุงูุชุฏุงูู", "ูุฃููุง ูุง ุชุฏุฑ ุนุงุฆุฏุงู ุฃู ูุงุฆุฏุฉ ูุตุงุญุจูุง ููู ุณุงุฆูุฉ", "ูุฃููุง ุชููุฏ ูููุชูุง ุงููุงุฏูุฉ", "ูุฃููุง ุชุณุชุฎุฏู ูู ุงูุจููู ููุท"] },
        { q: "ูุง ูู ูุธููุฉ ุงูุจูู ุงููุฑูุฒู ุจุตูุชู 'ุงูููุฑุถ ุงูุฃุฎูุฑ'ุ", a: "ูุฏ ุงูุจููู ุจุงูุณูููุฉ ุงููุงุฒูุฉ ูู ุญุงูุงุช ุงูุฃุฒูุงุช", o: ["ุฅูุฑุงุถ ุงูุฃูุฑุงุฏ ูุงููุดุฑูุนุงุช ุงูุตุบูุฑุฉ", "ูุชุญ ุญุณุงุจุงุช ุชูููุฑ ููููุงุทููู", "ูุฏ ุงูุจููู ุจุงูุณูููุฉ ุงููุงุฒูุฉ ูู ุญุงูุงุช ุงูุฃุฒูุงุช", "ุชุฌุงุฑุฉ ุงูุนููุงุช ูู ุงูุจูุฑุตุฉ"] },
        { q: "ูุงุฐุง ูุญุฏุซ ุนูุฏ ุงูุฎูุงุถ ุชูุงููู ุงูููู ูุงูุดุญู ุฏูููุงูุ", a: "ูุฒูุฏ ุญุฌู ุงูุชุจุงุฏู ุงูุชุฌุงุฑู ุจูู ุงูุฏูู", o: ["ููู ุญุฌู ุงูุชุจุงุฏู ุงูุชุฌุงุฑู", "ูุฒูุฏ ุญุฌู ุงูุชุจุงุฏู ุงูุชุฌุงุฑู ุจูู ุงูุฏูู", "ุชุชููู ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ", "ูุฒูุฏ ุงูุฏุฎู ุงููููู ููุท"] },
        { q: "ููุงุฐุง ุชูุฑุถ ุงูุฏูู ูููุฏุงู ูุญูุงูุฉ 'ุงูุฃูู ุงููููู'ุ", a: "ูุญูุงูุฉ ุงูุตูุงุนุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ ูู ุงูุถุบูุท ุงูุฎุงุฑุฌูุฉ ููุช ุงูุฃุฒูุงุช", o: ["ูุฒูุงุฏุฉ ุฃุฑุจุงุญ ุงูุชุฌุงุฑ ุงููุญูููู", "ูุชูููู ุนุฏุฏ ุงูุณูุงู", "ูุญูุงูุฉ ุงูุตูุงุนุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ ูู ุงูุถุบูุท ุงูุฎุงุฑุฌูุฉ ููุช ุงูุฃุฒูุงุช", "ูุชุดุฌูุน ุงูุณูุงุญุฉ"] },
        { q: "ูุง ูู ุฏูุฑ 'ุบุฑูุฉ ุงูููุงุตุฉ' ูู ุงูุจูู ุงููุฑูุฒูุ", a: "ุชุณููุฉ ุงูุญุณุงุจุงุช ูุงูุดููุงุช ุงููุชุจุงุฏูุฉ ุจูู ุงูุจููู", o: ["ุฅุตุฏุงุฑ ุงูุนููุงุช ุงููุฑููุฉ", "ุชุณููุฉ ุงูุญุณุงุจุงุช ูุงูุดููุงุช ุงููุชุจุงุฏูุฉ ุจูู ุงูุจููู", "ููุญ ูุฑูุถ ููููุงุทููู", "ุชุญุฏูุฏ ุฃุณุนุงุฑ ุงูุณูุน"] },
        { q: "ูู ุญุงูุฉ ุงูุชุถุฎูุ ููุงุฐุง ูุนุชุจุฑ ุงูุงุญุชูุงุธ ุจุงููููุฏ ุฎุณุงุฑุฉุ", a: "ุจุณุจุจ ุงูุฎูุงุถ ุงูููุฉ ุงูุดุฑุงุฆูุฉ ูููููุฏ", o: ["ูุฃู ุงูุจููู ุชุบูู ุฃุจูุงุจูุง", "ุจุณุจุจ ุงูุฎูุงุถ ุงูููุฉ ุงูุดุฑุงุฆูุฉ ูููููุฏ", "ูุฃู ุงููููุฏ ุชุตุจุญ ูุฏููุฉ", "ุจุณุจุจ ุฒูุงุฏุฉ ุงูููุงุฆุฏ"] },
        { q: "ูุง ูู ุงูููุงุฉ ุงูุฃุณุงุณูุฉ ูุงูุชูุงู ุงูุณูุน ุงูุฑุฃุณูุงููุฉ ูู ุงูุฏูู ุงููุชูุฏูุฉ ูููุงููุฉุ", a: "ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ", o: ["ุงูุงุณุชููุงู ุงููุญูู", "ุงูุชุฌุงุฑุฉ ุงูุฎุงุฑุฌูุฉ", "ุงูุถุฑุงุฆุจ ุงูุฏุงุฎููุฉ", "ุงููุฑูุถ ุงูุดุฎุตูุฉ"] },
        { q: "ุญุณุจ ุงููุนุงุฑุถููุ ูุง ูู 'ุนุฏูู ุงูุฃุฒูุงุช'ุ", a: "ุงูุชูุงู ุงููุดุงูู ุงูุงูุชุตุงุฏูุฉ ูู ุงูุฏูู ุงูุดุฑููุฉ ููุฏุงุฎู", o: ["ุงูุชุดุงุฑ ุงูุฃูุฑุงุถ ุจูู ุงูุชุฌุงุฑ", "ุงูุชูุงู ุงููุดุงูู ุงูุงูุชุตุงุฏูุฉ ูู ุงูุฏูู ุงูุดุฑููุฉ ููุฏุงุฎู", "ุฒูุงุฏุฉ ุงูุตุงุฏุฑุงุช ุจุดูู ููุงุฌุฆ", "ุชููู ุงูุจููู ุนู ุงูุนูู"] },
        { q: "ูุง ูู ุงูุฏููุฉ ุงูุชู ุชุนุชุจุฑ 'ุงููููุฑ ุงูุขุณูููุฉ' ูุฏูุฉ ููุง ูู ุณูุงุณุฉ ุงูุชุตุฏูุฑุ", a: "ุงูุฏูู ุงูุชู ุชุชุจุน ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุตููุน ููุชุตุฏูุฑ", o: ["ุงูุฏูู ุงูุชู ุชุชุจุน ุฅุญูุงู ุงููุงุฑุฏุงุช", "ุงูุฏูู ุงูุชู ุชุชุจุน ุงุณุชุฑุงุชูุฌูุฉ ุงูุชุตููุน ููุชุตุฏูุฑ", "ุงูุฏูู ุงูููุบููุฉ ุงูุชุตุงุฏูุงู", "ุงูุฏูู ุงูุชู ุชุนุชูุฏ ุนูู ุงูุฐูุจ ููุท"] },
        { q: "ูู ูู ุตุงุญุจ ูุธุฑูุฉ 'ุงูููุฒุฉ ุงููุณุจูุฉ'ุ", a: "ุฏูููุฏ ุฑููุงุฑุฏู", o: ["ุขุฏู ุณููุซ", "ุฏูููุฏ ุฑููุงุฑุฏู", "ูุฑูุฑ ููุฑุด", "ุนูุฏ ุนุดุฑู"] },
        { q: "ููู ุชุณุงูู ุงูุชุฌุงุฑุฉ ูู 'ููู ุงููุนุฑูุฉ' (Know-how)ุ", a: "ุนุจุฑ ุงุญุชูุงู ุงูุนูุงูุฉ ุงููุญููุฉ ุจุงูุฎุจุฑุงุช ุงูุฅุฏุงุฑูุฉ ุงูุฃุฌูุจูุฉ", o: ["ุนุจุฑ ูุฑุงุกุฉ ุงููุชุจ ุงูุฃุฌูุจูุฉ ููุท", "ุนุจุฑ ุงุญุชูุงู ุงูุนูุงูุฉ ุงููุญููุฉ ุจุงูุฎุจุฑุงุช ุงูุฅุฏุงุฑูุฉ ุงูุฃุฌูุจูุฉ", "ุนุจุฑ ุฒูุงุฏุฉ ุงูุถุฑุงุฆุจ", "ุนุจุฑ ุบูู ุงูุญุฏูุฏ"] }
    ];

    let currentIdx = 0;
    let userAnswers = new Array(questions.length).fill(null);
    let timeLeft = 30 * 60; 
    let timerInterval;

    // --- ูุธููุฉ ุงูุนุฏุงุฏ ุงูุนุงููู (ุชู ุฅุตูุงุญูุง ูุชููู ูุณุชูุฑุฉ) ---
    function fetchGlobalVisits() {
        // ูุณุชุฎุฏู LocalStorage ููุญุงูุงุฉ ุงูุนุฏุงุฏ ุจุดูู ููุซูู
        // ุฃู ูููู ุงุณุชุฎุฏุงู API ูุซู countapi.xyz ุฅุฐุง ูุงู ูุนูู
        let visits = localStorage.getItem('site_visits');
        if (!visits) {
            visits = 1250; // ุฑูู ุจุฏุงูุฉ ุงูุชุฑุงุถู
        } else {
            visits = parseInt(visits) + 1;
        }
        localStorage.setItem('site_visits', visits);
        document.getElementById('global-count').innerText = visits.toLocaleString() + " +";
    }

    // --- ูุธุงุฆู ุงูุชููู ูุงูุดุงุดุฉ ---
    function handleLogin() {
        const name = document.getElementById('name-input').value;
        const grade = document.getElementById('grade-input').value;
        
        if(!name || !grade) {
            document.getElementById('auth-err').style.display = 'block'; 
            return;
        }

        document.getElementById('user-display-name').innerText = "ุงูุทุงูุจ: " + name;

        // ุชูุณูู ุฑุณุงูุฉ ุงูุฏุฎูู (HTML Format)
        const now = new Date();
        let loginMsg = `<b>๐ ุชุณุฌูู ุฏุฎูู ุฌุฏูุฏ | New Login</b>\n`;
        loginMsg += `โโโโโโโโโโโโโโโโโโ\n`;
        loginMsg += `๐ค <b>ุงูุงุณู:</b> ${name}\n`;
        loginMsg += `๐๏ธ <b>ุงููุฑูุฉ:</b> ${grade}\n`;
        loginMsg += `๐ <b>ุงูุชุงุฑูุฎ:</b> ${now.toLocaleDateString('ar-EG')}\n`;
        loginMsg += `๐ <b>ุงูููุช:</b> ${now.toLocaleTimeString('ar-EG')}\n`;
        loginMsg += `๐ <b>ุงููุตุฏุฑ:</b> ููุตุฉ ุงูุงูุชุตุงุฏ ุงูุฑูููุฉ`;

        sendToTelegram(loginMsg);

        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('main-menu').style.display = 'block';
    }

    function showSection(section) {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('explanation-section').style.display = 'none';
        document.getElementById('quiz-ui').style.display = 'none';

        if(section === 'explanation') {
            document.getElementById('explanation-section').style.display = 'block';
        } else if(section === 'quiz') {
            document.getElementById('quiz-ui').style.display = 'block';
            startQuiz();
        } else {
            // ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
            document.getElementById('main-menu').style.display = 'block';
            
            // ูุงู ุฌุฏุงู: ูุณุญ ูุญุชูู ุชุญููู ุงููุชุงุฆุฌ ุนูุฏ ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ
            document.getElementById('final-analysis').innerHTML = '';
            document.getElementById('score-display').innerText = '';
        }
    }

    // --- ููุทู ุงูุงุฎุชุจุงุฑ ---
    function startTimer() {
        if(timerInterval) clearInterval(timerInterval);
        timerInterval = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft / 60), s = timeLeft % 60;
            document.getElementById('timer').innerText = `ุงููุชุจูู: ${m}:${s < 10 ? '0'+s : s}`;
            if(timeLeft <= 0) submitFinal();
        }, 1000);
    }

    function startQuiz() {
        currentIdx = 0;
        userAnswers = new Array(questions.length).fill(null);
        timeLeft = 30 * 60;
        document.getElementById('result-screen').style.display = 'none'; // ุฅุฎูุงุก ุงููุชูุฌุฉ ุงููุฏููุฉ
        startTimer();
        showQuestion();
    }

    function showQuestion() {
        const q = questions[currentIdx];
        document.getElementById('questions-container').style.display = 'block';
        document.getElementById('confirm-screen').style.display = 'none';
        document.getElementById('nav-controls').style.display = 'flex';
        
        document.getElementById('questions-container').innerHTML = `
            <div class="q-text">${currentIdx + 1}. ${q.q}</div>
            ${q.o.map(opt => `<div class="option-btn ${userAnswers[currentIdx] === opt ? 'selected' : ''}" onclick="selectOption('${opt}')">${opt}</div>`).join('')}`;
            
        document.getElementById('prev-btn').disabled = currentIdx === 0;
        document.getElementById('next-btn').innerText = currentIdx === questions.length - 1 ? "ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช" : "ุงูุชุงูู";
        document.getElementById('q-counter').innerText = `ุณุคุงู ${currentIdx + 1} ูู ${questions.length}`;
        document.getElementById('progress-fill').style.width = `${((currentIdx + 1) / questions.length) * 100}%`;
    }

    function selectOption(opt) { userAnswers[currentIdx] = opt; showQuestion(); }
    function nextQuestion() { if(currentIdx < questions.length - 1) { currentIdx++; showQuestion(); } else { showConfirmation(); } }
    function prevQuestion() { if(currentIdx > 0) { currentIdx--; showQuestion(); } }

    function showConfirmation() {
        document.getElementById('questions-container').style.display = 'none';
        document.getElementById('nav-controls').style.display = 'none';
        document.getElementById('confirm-screen').style.display = 'block';
        document.getElementById('confirm-list').innerHTML = userAnswers.map((ans, i) => `
            <div style="padding:10px; border-bottom:1px solid #eee; text-align:right;">
                <strong>${i+1}. ${questions[i].q}</strong><br>
                <span style="color:var(--accent)">ุฅุฌุงุจุชู: ${ans || 'โ๏ธ ูู ูุชู ุงูุฅุฌุงุจุฉ'}</span>
            </div>`).join('');
    }

    function submitFinal() {
        clearInterval(timerInterval);
        const name = document.getElementById('name-input').value;
        const timeSpentMin = 30 - Math.floor(timeLeft / 60);
        let score = 0;
        
        // ุจูุงุก HTML ุงูุฎุงุต ุจุงูุชุญููู ุฏุงุฎู ุงููุชุบูุฑ
        let analysisHtml = '';

        userAnswers.forEach((ans, i) => {
            const isCorrect = (ans === questions[i].a);
            if(isCorrect) score++;

            // ุชุตููู ุจููุณ ููู ุณุคุงู
            analysisHtml += `
                <div style="padding:15px; margin-bottom:10px; background:${isCorrect ? '#f0fdf4' : '#fef2f2'}; border-radius:10px; border:1px solid ${isCorrect ? '#bbf7d0' : '#fecaca'};">
                    <div style="font-weight:bold; margin-bottom:5px; color:#1e293b;">
                        ${i + 1}. ${questions[i].q}
                        ${isCorrect ? 'โ' : 'โ'}
                    </div>
                    <div style="font-size:14px; color:#475569;">ุฅุฌุงุจุชู: <span style="font-weight:bold;">${ans || 'ูุง ููุฌุฏ'}</span></div>
                    ${!isCorrect ? `<div style="font-size:14px; color:#166534; margin-top:5px;">๐ก ุงูุตุญูุญ: <b>${questions[i].a}</b></div>` : ''}
                </div>`;
        });

        let gradeLabel = "ูุญุชุงุฌ ูุฑุงุฌุนุฉ โ๏ธ";
        if (score >= (questions.length * 0.85)) gradeLabel = "ููุชุงุฒ โจ";
        else if (score >= (questions.length * 0.75)) gradeLabel = "ุฌูุฏ ุฌุฏุงู ๐";
        else if (score >= (questions.length * 0.50)) gradeLabel = "ููุจูู ๐";

        // ุนุฑุถ ุงููุชุงุฆุฌ
        document.getElementById('confirm-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('score-display').innerText = `${score} / ${questions.length}`;
        
        // ูุถุน ุงูุชุญููู ุฏุงุฎู ุงูุตูุฏูู ุงููุฎุตุต
        document.getElementById('final-analysis').innerHTML = analysisHtml;

        // ุฅุฑุณุงู ุงููุชูุฌุฉ ุจุชูุณูู ุฌุฐุงุจ
        let resultMsg = `<b>๐ ูุชูุฌุฉ ุงุฎุชุจุงุฑ ุฌุฏูุฏุฉ</b>\n`;
        resultMsg += `โโโโโโโโโโโโโโโโโโ\n`;
        resultMsg += `๐ค <b>ุงูุทุงูุจ:</b> ${name}\n`;
        resultMsg += `๐ <b>ุงูุฏุฑุฌุฉ:</b> ${score} ูู ${questions.length}\n`;
        resultMsg += `๐๏ธ <b>ุงูุชูุฏูุฑ:</b> ${gradeLabel}\n`;
        resultMsg += `โฑ๏ธ <b>ุงูููุช:</b> ${timeSpentMin} ุฏูููุฉ`;
        
        sendToTelegram(resultMsg);
    }

    function restartQuiz() { showSection('quiz'); }

    function printCertificate() {
        const name = document.getElementById('name-input').value;
        const score = document.getElementById('score-display').innerText;
        document.getElementById('cert-name').innerText = name;
        document.getElementById('cert-score').innerText = score;
        document.getElementById('cert-date').innerText = new Date().toLocaleDateString('ar-EG');
        document.getElementById('cert-ref').innerText = Math.floor(Math.random() * 90000) + 10000;
        const cert = document.getElementById('certificate-print');
        cert.style.display = 'block';
        setTimeout(() => { window.print(); cert.style.display = 'none'; }, 500);
    }

    // --- ูุธุงุฆู ุงููุฑุงุณูุฉ ---
    function sendToTelegram(text) {
        // ุฅุถุงูุฉ parse_mode=HTML ูุชูุนูู ุงูุชูุณูู
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=HTML`);
    }

    function toggleFeedbackPanel() {
        const panel = document.getElementById('feedback-panel');
        panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }

    function sendSuggestion() {
        const phone = document.getElementById('user-phone').value;
        const suggestion = document.getElementById('user-suggestion').value;
        const name = document.getElementById('name-input').value || "ุฒุงุฆุฑ";
        
        if(suggestion) {
            let feedbackMsg = `<b>๐ก ุงูุชุฑุงุญ / ุฑุณุงูุฉ ุฌุฏูุฏุฉ</b>\n`;
            feedbackMsg += `โโโโโโโโโโโโโโโโโโ\n`;
            feedbackMsg += `๐ค <b>ุงูุงุณู:</b> ${name}\n`;
            feedbackMsg += `๐ฑ <b>ุงููุงุชู:</b> ${phone || 'ุบูุฑ ูุฏุฎู'}\n`;
            feedbackMsg += `๐ <b>ุงููุญุชูู:</b>\n${suggestion}`;

            sendToTelegram(feedbackMsg);

            alert("ุดูุฑุงู ูู! ุชู ุฅุฑุณุงู ุฑุณุงูุชู ุจูุฌุงุญ.");
            toggleFeedbackPanel();
            document.getElementById('user-suggestion').value = "";
        } else {
            alert("ูุฑุฌู ูุชุงุจุฉ ุงูุงูุชุฑุงุญ ุฃููุงู");
        }
    }

    // ุชุดุบูู ุงูุนุฏุงุฏ ุนูุฏ ุงูุชุญููู
    window.onload = fetchGlobalVisits;
</script>
</body>
</html>
